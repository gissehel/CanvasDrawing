<!doctype html>
<html>
    <head>
        <script src='canvasdrawing.js'></script>
        <script src='drawTimeTable.js'></script>
        <script src='animate.js'></script>
        <style>
            body, canvas { margin:0; padding:0; overflow: hidden;}
        </style>
    </head>
    <body>
        <canvas id='item'></canvas>
    </body>
</html>
<script>
let {Drawing, Vector, animate, drawTimeTable} = CanvasDrawing;
// let [width, height] = [1920,1080];
let [width, height] = [window.innerWidth, window.innerHeight];
let minDim = Math.min(width, height);
let drawing = new Drawing({ canvas: document.getElementById('item'), height, width, origin: [width/2,height/2], mapx: minDim/2, mapy: -minDim/2, bgcolor: '#e0e0cc' });

const drawFrame = (k)=> {
    let [n,m] = [3*(k-1)-13, k];
    drawTimeTable(drawing, n, m, {color: '#331108'});

    let text = `${n} - ${m}`;
    drawing.addText({text, fontFamily:'sans-serif', fontSize:'14px', color:'#442211', point:[1,-1], position: '7'});
}

let animationParams = {
    action: ({value}) => {
        drawFrame(value);
    },
    frameTime: 0.07,
};

let p = Promise.resolve();

const addActions = (p) => {
    p = p.then(() => animate({...animationParams,from: 512,to: 13}));
    p = p.then(() => animate({...animationParams,from: 13,to: 512}));
    return p;
}

for (let i=0; i<10; i++){
    p = addActions(p);
}

</script>
